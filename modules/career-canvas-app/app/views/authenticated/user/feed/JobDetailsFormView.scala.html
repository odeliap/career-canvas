@(
form: Form[careercanvas.io.model.job.UserProvidedJobDetails],
saveJobUrl: Call,
jobsResult: careercanvas.io.model.job.JobsResult,
baseJobInfo: careercanvas.io.model.job.BaseJobInfo
)(implicit request: MessagesRequestHeader)

@BaseJobTilesView(jobsResult) {
<div class="main-page">
    <div class="add-job-page">
        <div class="add-job-button">
            <a href="#" id="save-job" class="add-job">+</a>
        </div>
        <div class="job-description-input">
            @if(form.hasGlobalErrors) {
            @form.globalErrors.map { error: FormError =>
            <div>
                Error: @error.key: @error.message
            </div>
            }
            }

            @helper.form(
            saveJobUrl,
            'id -> "job-description-form"
            ) {
            @helper.CSRF.formField

            <div id="job-description-form-first-row">
                <div class="job-details-form-section">
                    <div class="job-details-form-section-title">Company</div>
                    @if(baseJobInfo.company.nonEmpty) {
                        @helper.inputText(
                            form("company"),
                            '_label -> "",
                            'placeholder -> baseJobInfo.company,
                            'id -> "job-description-company",
                            'size -> 60,
                            '_showConstraints -> false
                        )
                    } else {
                        @helper.inputText(
                            form("company"),
                            '_label -> "",
                            'id -> "job-description-company",
                            'size -> 60,
                            '_showConstraints -> false
                        )
                    }
                </div>

                <div class="job-details-form-section">
                    <div class="job-details-form-section-title">Job Title</div>
                    @if(baseJobInfo.company.nonEmpty) {
                        @helper.inputText(
                            form("jobTitle"),
                            '_label -> "",
                            'placeholder -> baseJobInfo.jobTitle,
                            'id -> "job-description-title",
                            'size -> 60,
                            '_showConstraints -> false
                        )
                    } else {
                        @helper.inputText(
                            form("jobTitle"),
                            '_label -> "",
                            'id -> "job-description-title",
                            'size -> 60,
                            '_showConstraints -> false
                        )
                    }
                </div>
            </div>

            <div id="job-description-form-second-row">
                <div class="job-details-form-section">
                    <div class="job-details-form-section-title">Status</div>
                    @helper.inputRadioGroup(
                        form("status"),
                        options = Seq("NotSubmitted" -> "Not Submitted", "Submitted" -> "Submitted", "Interview Scheduled" -> "InterviewScheduled", "Interviewed" -> "Interviewed", "OfferMade" -> "Offer Made", "Rejected" -> "Rejected"),
                        '_label -> "",
                        'id -> "job-description-status",
                        'size -> 60
                    )
                </div>

                <div class="job-details-form-section">
                    <div class="job-details-form-section-title">Interview Round</div>
                    @helper.inputText(
                        form("interviewRound"),
                        '_label -> "",
                        'id -> "job-description-interview-round",
                        'size -> 60,
                        '_showConstraints -> false
                    )
                </div>
            </div>

            <div class="job-details-form-section">
                <div class="job-details-form-section-title">Notes</div>
                @helper.inputText(
                    form("notes"),
                    '_label -> "",
                    'id -> "job-description-notes",
                    'size -> 60,
                )
            </div>

            <button id="final-save-job-button">Save</button>
            <a href="@routes.JobFeedController.removeJobDetails()" id="remove-job-description-button">Discard</a>
            }
        </div>
    </div>
    } {
    document.getElementById("save-job").addEventListener("click", function(e) {
    e.preventDefault();
    var jobDescriptionInputDiv = document.querySelector(".job-description-input");
    if (jobDescriptionInputDiv.style.display === "none") {
    jobDescriptionInputDiv.style.display = "block";
    this.style.backgroundColor = '#0077B5';
    this.style.color = 'white';
    } else {
    jobDescriptionInputDiv.style.display = "none";
    this.style.backgroundImage = 'transparent';
    this.style.color = '#333';
    }
    });
</div>
}