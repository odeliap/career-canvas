@import java.time.LocalDate;
@(jobInfos: Seq[careercanvas.io.model.job.JobInfo])

<div id="spreadsheet-rows">
    <table class="spreadsheet-view">
        <thead>
        <tr>
            <th>Company</th>
            <th>Job Title</th>
            <th>Job Type</th>
            <th>Location</th>
            <th>Salary Range</th>
            <th>Status</th>
            <th>Date Added</th>
            <th>Last Update</th>
        </tr>
        </thead>
        <tbody>
        @jobInfos.map { jobInfo =>
        <tr class="spreadsheet-row job-id-@jobInfo.jobId" data-status="@jobInfo.status.toString" data-company="@{"^[a-zA-Z0-9 ]*".r.findFirstIn(jobInfo.company)}" data-lastupdate="@jobInfo.lastUpdate.getTime" data-location="@{"^[a-zA-Z0-9 ]*".r.findFirstIn(jobInfo.location)}" data-starred="@jobInfo.starred.toString.toLowerCase()">
        <td>@jobInfo.company</td>
        <td>@jobInfo.jobTitle</td>
        <td>@jobInfo.jobType</td>
        <td>@jobInfo.location</td>
        <td>@jobInfo.salaryRange</td>
        <td class="status-dropdown" id="spreadsheetStatusSection">
            <button class="status-btn" id="spreadsheetStatusButton">@jobInfo.status.toString.replaceAll("\\d+", "").replaceAll("(.)([A-Z])", "$1 $2")</button>
            <div class="dropdown-menu">
                <p class="dropdown-item @(if(jobInfo.status.toString == "Bookmarked") "active-status")" data-id="@jobInfo.jobId" status="Bookmarked">Bookmarked</p>
                <p class="dropdown-item @(if(jobInfo.status.toString == "Applying") "active-status")" data-id="@jobInfo.jobId" status="Applying">Applying</p>
                <p class="dropdown-item @(if(jobInfo.status.toString == "Applied") "active-status")" data-id="@jobInfo.jobId" status="Applied">Applied</p>
                <p class="dropdown-item @(if(jobInfo.status.toString == "Interviewing") "active-status")" data-id="@jobInfo.jobId" status="Interviewing">Interviewing</p>
                <p class="dropdown-item @(if(jobInfo.status.toString == "Offer") "active-status")" data-id="@jobInfo.jobId" status="Offer">Offer</p>
                <p class="dropdown-item @(if(jobInfo.status.toString == "Rejected") "active-status")" data-id="@jobInfo.jobId" status="Rejected">Rejected</p>
            </div>
        </td>
        <td>@jobInfo.dateAdded.toLocalDateTime().toLocalDate()</td>
        <td class="lastUpdate@jobInfo.jobId">@jobInfo.lastUpdate.toLocalDateTime().toLocalDate()</td>
        </tr>
        }
        </tbody>
    </table>
</div>
