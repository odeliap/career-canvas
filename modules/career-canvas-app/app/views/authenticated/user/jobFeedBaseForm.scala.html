@(jobInfos: Seq[careercanvas.io.model.JobInfo])(content: Html)(script: Html)(implicit request: MessagesRequestHeader)

@main("Job Feed") {
    <div>
        @request.flash.data.map{ case (name, value) =>
            @if(name.equals("error")) {
                <div class="error-flash">@name: @value</div>
            } else if (name.equals("success")) {
                <div class="success-flash">@name: @value</div>
            } else {
                <div class="info-flash">@name: @value</div>
            }
        }
</div>
    @content
    <div class="job-tiles">
        @jobInfos.map { jobInfo =>
            <div class="job-tile">
                <div class="job-tile-tab">@jobInfo.jobTitle</div>
                <p>Company: @jobInfo.company</p>
                <p>Status: @jobInfo.status.toString.replaceAll("\\d+", "").replaceAll("(.)([A-Z])", "$1 $2")</p>
                @if(jobInfo.interviewRound.nonEmpty) {
                    @if(!jobInfo.interviewRound.get.equals(0)) {
                        <p>Interview Round: @jobInfo.interviewRound</p>
                    }
                }
                @if(jobInfo.appSubmissionDate.nonEmpty) {
                    <p>App Submission Date: @jobInfo.status</p>
                }
                <p>Last Update: @jobInfo.lastUpdate</p>
            </div>
        }
    </div>

    <script>
        @script
    </script>
}