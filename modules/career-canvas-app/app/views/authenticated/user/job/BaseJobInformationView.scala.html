@(
jobInfo: careercanvas.io.model.job.JobInfo
)(content: Html)

@authenticated.user.AuthenticatedUserLayout(s"${jobInfo.company}: ${jobInfo.jobTitle}") {
    <div class="main-page">
        <div class="job-view-container">
            <div class="job-view-left-section"></div>
            <div class="job-view-middle-panel">
                <div class="job-view-top-part">
                    <div id="job-view-intro">
                        <div id="job-view-content">
                            <div class="job-view-title">@jobInfo.company</div>
                            <a href="@jobInfo.postUrl" target="_blank" class="job-view-subtitle">@jobInfo.jobTitle</a>
                            <div class="job-view-blank-space"></div>
                            <div class="job-view-metadata">
                                <div class="job-view-metadata-title">Application Status: </div>
                                <div class="job-view-metadata-content">@jobInfo.status.toString.replaceAll("\\d+", "").replaceAll("(.)([A-Z])", "$1 $2")</div>
                            </div>
                            @if(jobInfo.appSubmissionDate.nonEmpty) {
                            <div class="job-view-metadata">
                                <div class="job-view-metadata-title">Application Submitted:</div>
                                <div class="job-view-metadata-content">@jobInfo.appSubmissionDate.get</div>
                            </div>
                            }
                            @if(jobInfo.interviewRound.nonEmpty) {
                            <div class="job-view-metadata">
                                <div class="job-view-metadata-title">Interview Round: </div>
                                <div class="job-view-metadata-content">@jobInfo.interviewRound.get</div>
                            </div>
                            }
                            <div class="job-view-metadata">
                                <div class="job-view-metadata-title">Last Updated: </div>
                                <div class="job-view-metadata-content">@jobInfo.lastUpdate</div>
                            </div>
                            @if(jobInfo.notes.nonEmpty) {
                            @if(jobInfo.notes.get != ""){
                            <div class="job-view-metadata">
                                <div class="job-view-metadata-title">Notes: </div>
                                <div class="job-view-metadata-content">@jobInfo.notes.get</div>
                            </div>
                            }
                            }
                        </div>
                    </div>
                </div>
                <div class="job-view-bottom-part">
                    @content
                </div>
            </div>
            <div class="job-view-right-section">
                <h4 id="files-directory-title">Files</h4>
                <div class="directories">
                    <div class="directory">
                        <span class="toggle-btn">▶</span>Cover Letters
                        <div class="sub-directory hidden">
                            <div>Cover Letter 1</div>
                            <div>Cover Letter 2</div>
                        </div>
                    </div>
                    <div class="directory">
                        <span class="toggle-btn">▶</span>Responses
                        <div class="sub-directory hidden">
                            <div>Response 1</div>
                            <div>Response 2</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const directories = document.querySelectorAll(".directory");

            directories.forEach(directory => {
                directory.addEventListener("click", function() {
                    const toggleBtn = this.querySelector(".toggle-btn");
                    const subDirectory = this.querySelector(".sub-directory");

                    if (subDirectory.classList.contains("hidden")) {
                        subDirectory.classList.remove("hidden");
                        toggleBtn.textContent = "▼";
                    } else {
                        subDirectory.classList.add("hidden");
                        toggleBtn.textContent = "▶";
                    }
                });
            });
        });
    </script>
}