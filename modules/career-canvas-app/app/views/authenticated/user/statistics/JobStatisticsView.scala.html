@(statusPercentages: Html)

@authenticated.user.AuthenticatedUserLayout("Statistics | Career Canvas") {
    <div class="main-page">
        <div id="container" style="width:100%; height:400px;"></div>
        <script src="http://code.highcharts.com/highcharts.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                var statusPercentages = @statusPercentages;
                const data = Array.from(statusPercentages);
                var series = [];
                for(n in data) {
                    series.push({
                        name: data[n][0],
                        y: data[n][1]
                    })
                };
                if (series.length !== 0) {
                    const chart = Highcharts.chart('container', {
                        chart: {
                            plotBackgroundColor: null,
                            plotBorderWidth: null,
                            plotShadow: false,
                            type: 'pie'
                        },
                        title: {
                            text: 'Job Status Breakdown',
                            align: 'left'
                        },
                        tooltip: {
                            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                        },
                        accessibility: {
                            point: {
                                valueSuffix: '%'
                            }
                        },
                        plotOptions: {
                            pie: {
                                allowPointSelect: true,
                                cursor: 'pointer',
                                dataLabels: {
                                    enabled: true,
                                    format: '<b>{point.name}</b>: {point.percentage:.1f} %'
                                }
                            }
                        },
                        series: [{
                            name: 'Status',
                            colorByPoint: true,
                            data: series
                        }]
                    });
                }
            });
        </script>
        @FooterTemplate()
    </div>
}