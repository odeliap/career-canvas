@(
resumes: Seq[careercanvas.io.model.user.Resume]
)(implicit request: MessagesRequestHeader)

@baseProfileView("Resumes") {
    <h2>Upload Resume</h2>
    @helper.form(action = routes.ProfileController.uploadResume, Symbol("enctype") -> "multipart/form-data") {
        @helper.CSRF.formField
        <input type="file" name="resume">
        <p>
            <input type="submit">
        </p>
    }
    <h2>My Resumes</h2>
    <div class="resume-stack">
        @resumes.map { resume =>
        <div class="resume-tile">
            <h3>Version @resume.version</h3>
            <p>Name: @resume.name</p>
            <p>Upload Date: @resume.uploadDate.toString.split("\\.")(0)</p>
            <button>View</button>

            <form action="@routes.ProfileController.deleteResume(resume.version)" method="POST" id="delete-resume-form">
                @helper.CSRF.formField
                <button type="submit" id="delete-resume-button">Delete Resume</button>
            </form>
        </div>
        }
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var deleteButtons = document.querySelectorAll('#delete-resume-button');

        deleteButtons.forEach(function(button) {
          button.addEventListener('click', function(event) {
            event.preventDefault();

            var isConfirmed = window.confirm('Are you sure you want to delete this resume?');

            if (isConfirmed) {
              event.target.closest('#delete-resume-form').submit();
            }
          });
        });
      });
    </script>
}